<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="view_repair_order_tree" model="ir.ui.view">
        <field name="name">repair.order.list.inherit</field>
        <field name="model">repair.order</field>
        <field name="inherit_id" ref="repair.view_repair_order_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='schedule_date']" position="after">
                <field name="motor" column_invisible="1"/>
                <field name="motor_number"/>
            </xpath>
        </field>
    </record>

    <record id="view_repair_order_form" model="ir.ui.view">
        <field name="name">repair.order.form.inherit</field>
        <field name="model">repair.order</field>
        <field name="inherit_id" ref="repair.view_repair_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='product_id']" position="after">
                <field name="motor"/>
            </xpath>
            <xpath expr="//field[@name='schedule_date']" position="after">
                <field name="estimated_duration" widget="float_time" readonly="state in ['done', 'cancel']"/>
            </xpath>
            <xpath expr="//button[@name='action_repair_end'][1]" position="attributes">
                <attribute name="string">Finish Repair</attribute>
            </xpath>
            <xpath expr="//button[@name='action_repair_end'][2]" position="attributes">
                <attribute name="string">Finish Repair</attribute>
            </xpath>
            <xpath expr="//field[@name='parts_availability']" position="after">
                <field name="product_list_price"/>
                <field name="product_standard_price"/>
                <field name="repair_cost"/>
            </xpath>
            <xpath expr="//list/field[@name='product_uom_qty']" position="after">
                <field name="line_cost" optional="show"/>
                <field name="line_price" optional="show"/>
            </xpath>
        </field>
    </record>

    <record id="view_repair_order_calendar" model="ir.ui.view">
        <field name="name">repair.order.calendar</field>
        <field name="model">repair.order</field>
        <field name="arch" type="xml">
            <calendar string="Repair Orders" date_start="schedule_date" date_delay="estimated_duration" color="user_id"
                      create="false" create_name_field="calendar_display_name" hide_time="true">
                <field name="name"/>
                <field name="partner_id"/>
                <field name="product_id"/>
                <field name="user_id"/>
                <field name="estimated_duration" widget="float_time"/>
                <field name="state"/>
                <field name="priority"/>
            </calendar>
        </field>
    </record>

    <record id="view_repair_order_search" model="ir.ui.view">
        <field name="name">repair.order.search.inherit.my.repairs</field>
        <field name="model">repair.order</field>
        <field name="inherit_id" ref="repair.view_repair_order_form_filter"/>
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='filter_draft']" position="before">
                <filter string="My Repairs" name="filter_my_repairs" domain="[('user_id', '=', uid)]"/>
            </xpath>
        </field>
    </record>

    <record id="repair.action_repair_order_tree" model="ir.actions.act_window">
        <field name="view_mode">list,calendar,kanban,graph,pivot,form,activity</field>
    </record>
</odoo>
